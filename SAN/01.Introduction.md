# Giới thiệu về SAN - Storage Area Network

## 1. Khái niệm
- `SAN - Storage Area Network` là kiến trúc mạng lưu trữ phổ biến nhất được sử dụng để xây dựng hệ thống mà cần truyền thông lượng lớn dữ liệu và có độ trễ thấp. Phần triển khai SAN đang phát triển nhanh chóng tận dụng lưu trữ toàn bộ flash để đạt được hiệu suất cao, độ trễ thấp nhất quán và tổng chi phí thấp hơn khi so sánh với ổ đĩa quay. Bởi việc lưu trữ dữ liệu trong hệ thống lưu trữ chia sẻ tập trung, các hệ thống SAN cho phép tổ chức có thể áp dụng các phương pháp và công cụ bảo mật, bảo vệ dữ liệu và khắc phục hậu quả thiên tai dễ hơn.
- SAN là dạng lưu trữ dựa theo khối(block-based storage), tận dụng kết nối tốc độ cao để kết nối các máy chủ đến các đơn vị đĩa ảo(LUN - logical disk unit). Một LUN là một khối lưu trữ được cung cấp từ một pool các lưu trữ được chia sẻ và được hiển thị với các máy chủ như một ổ đĩa ảo. Máy chủ phân vùng và định dạng những block này để máy chủ có thể lưu dữ liệu lên các LUN như trên ổ đĩa lưu trữ nội bộ.
- SAN chiếm khoảng 2/3 thị trường lưu trữ mạng. Chúng được thiết kế để loại bỏ single point of failure( đọc thêm về [SPOF](https://github.com/lamth/tailieu-HighAvailability/blob/master/Introduction-to-HighAvailability.md)), khiến hệ thống SAN có tính sẵn sàng và tính phục hồi cao. Một hệ thống San được thiết kế tốt có thể chịu được lỗi trên nhiều thành phần hay thiết bị trên hệ thống.


## 2. So sánh hệ thống SAN với một số hệ thống lưu trữ khác.

![](https://i.imgur.com/sjCpxjd.png)

Bên cạnh SAN có thể kể đến một số dạng hệ thống lưu trữ khác như DAS và NAS, vậy chúng khác gì so với SAN.

1. Direct Attached Storage(DAS)
- Direct Attached Storage hay được gọi là DAS là một cách lưu trữ quen thuộc, là các thiết bị lưu trữ nằm trong hoặc được gắn trực tiếp cho máy chủ. Các ứng dụng có thể truy cập vào ổ cứng ở block-level hoặc file-level.
- Vì gắn trực tiếp đến máy chủ, không qua các thiết bị mạng khác, do đó, DAS có một số ưu điểm như:
  - Dễ triển khai (cắm server, thiết lập một số cấu hình là có thể sử dụng :> )
  - Không tốn nhiều chi phí(cho các thiết bị lưu trữ ngoài và các thiết bị mạng)
- Tuy nhiên, cũng vì gắn trực tiếp cho từng máy chủ nên nó có một số nhược điểm như sau:
  - Khó mở rộng vì phạm vi lưu trữ chỉ trong một server.
  - Khó quản lý, nhiều server sử dụng DAS dẫn đến sự phân tán dữ liệu, dẫn đến tăng chi phí quản lý, vận hành, cũng khó khăn hơn trong việc bảo mật dữ liệu trên các máy chủ phân tán.
  - Hiệu năng của thiết bị lưu trữ cũng có thể phụ thuộc vào hiệu năng của máy chủ.
- Do đó, DAS phù hợp cho hệ thống nhỏ, chi phí thấp không yêu cầu cao về tính sẵn sàng và bảo mật.

![](https://i.imgur.com/WqvOQde.png)

2. Network Area Storage - NAS

- Network Attached Storage (NAS) là một dạng lưu trữ mạng, nó sử dụng các thiết bị lưu trữ đặc biệt và được kết nối đến mạng, có địa chỉ IP(tương tự máy chủ hay các thiết bị mạng khác). Các thiết bị NAS được sử dụng với mục đích chia sẻ dữ liệu tập trung thông qua mạng. NAS cung cấp khả năng truy cập lưu trữ cho các ứng dụng ở mức file(file-level), và người dùng phải sử dụng các giao thức như CIFS, NFS, hay SMB để có thể truy cập, đọc ghi các file trên NAS.

- NAS có một số ưu điểm so với DAS như:
  - Khả năng mở rộng và chia sẻ dự hiệu với nhu cầu lơn hơn so với DAS.
  - Cung cấp khả năng lưu trữ tập chung và chia sẻ qua mạng nên NAS, do đó dễ dàng quản lý hơn.
  - Chi phí triển khai hợp lý.

- Nhược điểm: 
  - NAS cung cấp hiệu năng lưu trữ không tốt vì nó chia sẻ dữ liệu sử dụng chung hạ tầng mạng với các ứng dụng khác. Do đó hiệu năng của nó dễ bị ảnh hưởng cũng như dễ làm ảnh hưởng đến hạ tầng mạng.

- NAS thường được sử dụng với mục đích lưu trữ và quản lý dữ liệu tập trung mà mà lượng dữ liệu nhỏ hoặc không yêu cầu nhiều đến hiệu năng, tốc độ lưu trữ dữ liệu

3. Storage Area Network - SAN

- SAN là một hệ thống lưu trữ sử dụng mạng riêng tốc độ cao để kết nối giữa các máy chủ sử dụng lưu trữ và các thiết bị lưu trữ với nhau. SAN cung cấp khả năng lưu trữ, quản lý và chia sẻ dữ liệu tập chung. Hầu hết hệ thống mạng SAN hiện nay dựa theo công nghệ cáp quang, cung cấp cho người dùng khả năng mở rộng, hiệu năng và tính sẵn sàng cao.
- SAN cung cấp khả năng truy cập ở mức block. Điều này có nghĩa là thay vì truy cập nội dung trên các ổ đĩa dưới dạng các file thông qua các giao thức truy cập file, SAN viết các block dữ liệu trực tiếp vào các ổ đĩa bằng việc sử dụng các giao thức như Fibre Channel over Ethernet hay Internet Small Computer System Interface (iSCSI)

![](https://i.imgur.com/IY9Yu2r.png)


- Ưu điểm:
  - Có khả năng lưu trữ dự liệu lớn, thường xuyên mà không làm ảnh hưởng đến hiệu năng của hệ thông mạng của các ứng dụng khác.
  - Đặc biệt thích hợp với các ứng dụng cần tốc độ và độ trễ nhỏ.
  - Dữ liệu luôn ở mức sẵn sàng cao.
  - Dữ liệu được lưu trữ thống nhất và và có khả năng quản lý cao. Có khả năng khôi phục dữ liệu nếu có xảy ra sự cố.
  - Hỗ trợ nhiều giao thức, chuẩn lưu trữ khác nhau như: iSCSI, FCIP, DWDM…
  - Có khả năng mở rộng tốt trên cả phương diện số lượng thiết bị, dung lượng hệ thống cũng như khoảng cách vật lý.
  - Mức độ an toàn cao do thực hiện quản lý tập trung cũng như sử dụng các công cụ hỗ trợ quản lý SAN.
- Nhược điểm:
  - Thiết kế, triển khai và vận hành hệ thống San cần có các công cụ quản lý phức tạp và kỹ sư cho chuyên môn cao.
  - Chi phí cho hệ thống SAN cũng cao hơn nhiều so với DAS và NAS do chi phí cho thiết bị và chi phí quản lý cao.
- Vì vậy, SAN thích hợp cho hệ thống yêu cầu hiệu năng, tính sẵn sàng và khả năng khôi phục cao, độ trễ thấp và có khả năng đáp ứng chi phí cao cho triển khai, vận hành SAN.



## 3. Các thành phần trong một hệ thống SAN.

- Fibre Channel(FC) là kiến trúc SAN chủ yếu được xây dựng.

- Các thành phần trong hệ thống SAN được mô tả trong hình ảnh dưới đây là dựa theo kiến trúc FC.

![](https://i.imgur.com/3eNZXOc.png)

### 3.1. Kết nối trong SAN
- Kết nối của các thiết bị lưu trữ và các máy chủ cần lưu trữ là thành phần là thành phần cần xem sét đầu tiên, thường nó sẽ là kết nối FC.

- Các thành phần được liệt kê trong hình trên là các thành phần trong mạng SAN cũng thường thấy trong triển khai LAN, WAN. Hầu hết các thuật ngữ sử dụng trong SAN đều có nguồn gốc từ mạng IP. 



### 3.2. Thành phần lưu trữ trong SAN.
SAN được sử dụng để giải phóng các thiết bị lưu trữ, các thiết bị lưu trữ sẽ không nằm trên bus của một máy chủ cụ thể nào mà nó được gắn trục tiếp vào mạng. Lưu trữ được ngoại hóa, nó có thể được phân phối theo chức năng trên toàn tổ chức.
SAN cũng cho phép tập trung các thiết bị lưu trữ và phân cụm máy chủ, có khả năng giúp bạn đạt được quản trị tập trung dễ dàng hơn và ít tốn kém hơn, giúp giảm tổng chi phí cho chủ sở hữu.

Hạ tầng lưu trữ là nền tảng để thông tin dựa vào. Do đó, hạ tầng lưu trữ hải hỗ trợ mục tiêu kinh doanh, và mô hình kinh doanh của công ty. 





## Tài liệu nguồn
- Bài viết được tổng hợp từ nhiều nguồn tài liệu:
  - [San là gì?](https://www.netapp.com/data-storage/what-is-san-storage-area-network/)(https://www.netapp.com/data-storage/what-is-san-storage-area-network)
  - [So sánh SAN, DAS và NAS](http://vinahost.info/phan-biet-das-nas-va-san)
  - Nguồn tài liệu chủ yếu lấy từ sách Introduction to Storage Area Network 