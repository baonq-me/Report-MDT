# Quản lý mạng trong linux.

## 1.Cấu hình network interface trên Debian.
### /etc/network/interfaces

File **/etc/network/interfaces** là file cấu hình interface card mạng chính trên Debian.
Ví dụ:
```bash
root@m4700:~# cat /etc/network/interfaces
# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).
# The loopback network interface
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet dhcp

auto eth1
iface eth1 inet static
address 10.42.189.198
broadcast 10.42.189.207
netmask 255.255.255.240
gateway 10.42.189.193
```
Ở ví dụ trên, card *eth0* đang cấu hình tự động bật cùng hệ thống(`auto eth0`) và cấu hình nhận dhcp(`iface eth0 inet dhcp`). Card *eth1* cũng cấu hình bật khi khởi động(`auto eth1`) và cấu hình ip tĩnh với các giá trị *address, broadcast, netmask, gateway*.

Có thể dùng lệnh `man interfaces` để xem thêm về file /etc/network/interfaces.
### /sbin/ifdown và /sbin/ifup
Lệnh `ifup` và `ifdown` là hai lệnh dùng để cấu hình cho các interface mà được xác định ở trong file /etc/network/interfaces

Lệnh `ifdown` là lệnh dùng để tắt một interface.
Khi interface ở trạng thái tắt(down) thì nó không thể dùng để kết nối với mạng.

Lệnh `ifup` là lệnh dùng để bật một interface để có thể sử.

## 2.Cấu hình network interface trên RHEL.
### /etc/sysconfig/network
File /etc/sysconfig/network là file cấu hình rộng cho tất cả các card mạng. Nó cho phép xác định có kết nối mạng hay không, hostname là gì, gateway là gì,..
Trên RHEL 7, file mặc định sẽ không có thiết lập nào.
```
[root@rhel71 ~]# cat /etc/sysconfig/network
# Created by anaconda
```
### /etc/sysconfig/network-scripts/ifcfg-
Mỗi card mạng đều có thể cấu hình độc lập với file /etc/sysconfig/network-scripts/ifcfg-*(với * là tên của card mạng). 

Ví dụ:
```bash
[root@cen3 ~]# cat /etc/sysconfig/network-scripts/ifcfg-ens33
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=none
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=6108c07e-440b-4078-96ac-7dcff5043a86
DEVICE=ens33
ONBOOT=yes
IPADDR=10.88.88.30
PREFIX=24
GATEWAY=10.88.88.2
DNS1=8.8.8.8
[root@cen3 ~]# 
```
Với một số giá trị trong file config:
- **DEVICE** : tên card mạng nên điền chính xác tên card mạng thì hệ thống mới nhận biết được card nào để cấu hình card mạng cho nó.
- **NAME** : là tên kết nối.
- **ONBOOT** : là tùy chọn khi hệ thống khởi động, "yes" để tự động bật card mạng cùng hệ thống.
- **BOOTPROTO** : cấu hình IP tĩnh hay DHCP. Nếu là - **DHCP** thì để giá trị "dhcp", nếu để tĩnh thì giá trị là "static"
- **IPV6INIT** : cấu hình hỗ trợ cài đặt IPv6 trên card mạng này(yes/no).
- **IPADDR** : địa chỉ IP tĩnh.
- **PREFIX** : subnet mask của lớp mạng IP sử dụng.
- **GATEWAY** : địa chỉ IP cổng gateway.
- **DNS1** : thông tin DNS server.

### nmcli
nmcli(network managerment command line interfaces) là một công cụ quản lý mạng phổ biến bằng command line trên linux.
Bạn nên chạy câu lệnh `nmcli connection reload` sau khi thay đổi cấu hình mạng. 
